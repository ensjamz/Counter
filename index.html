<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>HouseDex Builder • Micro Homes & BTC Studios</title>
<style>
  :root{
    --ink:#0f1226;
    --bg:#f6f7fb;
    --card:#ffffff;
    --accent:#ffb703;
    --accent-2:#4cc9f0;
    --ok:#22c55e;
    --muted:#9aa0b4;
    --danger:#ef4444;
    --shadow:0 10px 30px rgba(15,18,38,.08);
    --radius:16px;
  }
  *{box-sizing:border-box}
  html,body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}
  a{color:inherit}
  .wrap{max-width:1080px;margin-inline:auto;padding:24px}
  header{
    display:flex;align-items:center;gap:14px;margin-bottom:18px
  }
  .logo{
    width:44px;height:44px;border-radius:12px;background:
      radial-gradient(120% 140% at 70% 35%,#ffd166 0 38%,transparent 39%),
      radial-gradient(120% 140% at 30% 65%,#ffd166 0 38%,transparent 39%),
      linear-gradient(145deg,#111827,#1f2937);
    box-shadow:var(--shadow)
  }
  h1{font-size:clamp(22px,3vw,28px);margin:0}
  .sub{color:var(--muted);margin-top:2px}

  /* progress */
  .progress{display:grid;grid-template-columns:repeat(5,1fr);gap:10px;margin:20px 0}
  .dot{
    height:8px;border-radius:999px;background:#e6e8ef;position:relative;overflow:hidden
  }
  .dot.active{background:linear-gradient(90deg,var(--accent) 0%,var(--accent-2) 100%)}
  .steps-head{display:flex;justify-content:space-between;font-size:12px;color:var(--muted);margin-bottom:4px}

  /* stage */
  .stage{
    background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:20px
  }
  .stage h2{margin:0 0 4px 0;font-size:20px}
  .stage p.lead{margin:0 0 18px 0;color:#475069}

  /* option cards */
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}
  .card{
    background:#fff;border-radius:14px;border:1px solid #eef0f7;padding:14px;cursor:pointer;
    transition:.2s transform,.2s box-shadow,.2s border-color;position:relative
  }
  .card:hover{transform:translateY(-2px);box-shadow:var(--shadow)}
  .card.selected{border-color:var(--accent);box-shadow:0 8px 24px rgba(255,183,3,.25)}
  .row{display:flex;align-items:center;gap:10px}
  .pill{font-size:12px;background:#f1f5ff;border-radius:999px;padding:4px 8px;color:#334155;border:1px solid #e6ecff}
  .title{font-weight:700;font-size:16px}
  .muted{color:var(--muted);font-size:13px}
  .stats{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
  .stat{font-size:12px;background:#fafafa;border:1px dashed #ececec;border-radius:8px;padding:6px 8px}

  .actions{display:flex;justify-content:space-between;gap:10px;margin-top:18px}
  button{
    border:0;border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer
  }
  .ghost{background:#eef0f7;color:#12172a}
  .primary{background:linear-gradient(90deg,var(--accent) 0%,var(--accent-2) 100%);color:#111}
  button[disabled]{opacity:.4;cursor:not-allowed}

  /* summary */
  .summary{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px}
  .sum-box{background:#fff;border:1px solid #eef0f7;border-radius:14px;padding:14px}
  .badge{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;background:#f7fee7;border:1px solid #e8f4c5;font-size:12px;margin-top:6px}
  .danger{background:#fff1f2;border-color:#ffe4e6;color:#991b1b}
  footer{margin:26px 0 10px;color:var(--muted);font-size:12px;text-align:center}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="logo" aria-hidden="true"></div>
    <div>
      <h1>HouseDex Builder</h1>
      <div class="sub">Click through to assemble a Micro Home or BTC Studio with real build options.</div>
    </div>
  </header>

  <div class="steps-head"><span>1 • Foundation</span><span>2 • Structure</span><span>3 • Exterior</span><span>4 • Utilities</span><span>5 • Interior</span></div>
  <div class="progress" aria-hidden="true">
    <div class="dot active"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div>
  </div>

  <!-- STAGES -->
  <section class="stage" id="stage-1" data-stage="1">
    <h2>Step 1 — Choose Your Foundation</h2>
    <p class="lead">Pick the base that fits your site and climate. (Gamified stats = quick guidance.)</p>
    <div class="grid">
      <div class="card" data-group="foundation" data-value="Slab">
        <div class="row"><span class="pill">Warm/Dry</span><span class="pill">Fast Build</span></div>
        <div class="title" style="margin-top:8px;">Slab Foundation</div>
        <div class="muted">Concrete slab on grade.</div>
        <div class="stats">
          <div class="stat">Stability ★★★★☆</div>
          <div class="stat">Moisture ★★★★☆</div>
          <div class="stat">Repair ★★☆☆☆</div>
        </div>
      </div>
      <div class="card" data-group="foundation" data-value="Crawlspace">
        <div class="row"><span class="pill">Utility Access</span></div>
        <div class="title" style="margin-top:8px;">Crawlspace</div>
        <div class="muted">Raised floor, serviceable underside.</div>
        <div class="stats">
          <div class="stat">Stability ★★★☆☆</div>
          <div class="stat">Moisture ★★★☆☆</div>
          <div class="stat">Repair ★★★★☆</div>
        </div>
      </div>
      <div class="card" data-group="foundation" data-value="Pier & Beam">
        <div class="row"><span class="pill">Flood/Uneven</span></div>
        <div class="title" style="margin-top:8px;">Pier &amp; Beam</div>
        <div class="muted">Raised posts with beams & joists.</div>
        <div class="stats">
          <div class="stat">Stability ★★★☆☆</div>
          <div class="stat">Site Flex ★★★★★</div>
          <div class="stat">Repair ★★★★☆</div>
        </div>
      </div>
    </div>
    <div class="actions">
      <button class="ghost" disabled>Back</button>
      <button class="primary next" disabled>Next → Structure</button>
    </div>
  </section>

  <section class="stage" id="stage-2" data-stage="2" hidden>
    <h2>Step 2 — Structure (Framing)</h2>
    <p class="lead">Choose the skeleton. Think build speed, durability, and climate.</p>
    <div class="grid">
      <div class="card" data-group="structure" data-value="Wood Frame">
        <div class="row"><span class="pill">Fast</span><span class="pill">Flexible</span></div>
        <div class="title" style="margin-top:8px;">Wood Frame</div>
        <div class="muted">Standard studs + shear walls.</div>
        <div class="stats"><div class="stat">Speed ★★★★★</div><div class="stat">Durability ★★★☆☆</div></div>
      </div>
      <div class="card" data-group="structure" data-value="Steel">
        <div class="row"><span class="pill">Modern</span></div>
        <div class="title" style="margin-top:8px;">Steel Frame</div>
        <div class="muted">High strength, clean spans.</div>
        <div class="stats"><div class="stat">Durability ★★★★★</div><div class="stat">Thermal Breaks needed</div></div>
      </div>
      <div class="card" data-group="structure" data-value="ICF / Block">
        <div class="row"><span class="pill">Insulated</span></div>
        <div class="title" style="margin-top:8px;">ICF / Block Walls</div>
        <div class="muted">Concrete core, great sound/energy.</div>
        <div class="stats"><div class="stat">Energy ★★★★★</div><div class="stat">Speed ★★☆☆☆</div></div>
      </div>
    </div>
    <div class="actions">
      <button class="ghost prev">← Back</button>
      <button class="primary next" disabled>Next → Exterior</button>
    </div>
  </section>

  <section class="stage" id="stage-3" data-stage="3" hidden>
    <h2>Step 3 — Exterior (Form / Style)</h2>
    <p class="lead">Pick a “regional form” for your use case. These set roof shape, cladding, and massing.</p>
    <div class="grid">
      <div class="card" data-group="exterior" data-value="Micro Loft (Urban)">
        <div class="row"><span class="pill">Urban</span></div>
        <div class="title" style="margin-top:8px;">Micro Loft (Urban)</div>
        <div class="muted">Tall & narrow, rooftop deck option.</div>
        <div class="stats"><div class="stat">Space Use ★★★★★</div><div class="stat">Noise ★★☆☆☆</div></div>
      </div>
      <div class="card" data-group="exterior" data-value="Desert Compound">
        <div class="row"><span class="pill">SoCal</span><span class="pill">Shade</span></div>
        <div class="title" style="margin-top:8px;">Desert Compound</div>
        <div class="muted">Courtyard, deep overhangs, stucco.</div>
        <div class="stats"><div class="stat">Heat ★★★★★</div><div class="stat">Wind ★★★★☆</div></div>
      </div>
      <div class="card" data-group="exterior" data-value="BTC Studio (High-Tech)">
        <div class="row"><span class="pill">Creator</span><span class="pill">Secure</span></div>
        <div class="title" style="margin-top:8px;">BTC Studio (High-Tech)</div>
        <div class="muted">Server rack closet, EMP-aware wiring.</div>
        <div class="stats"><div class="stat">Tech ★★★★★</div><div class="stat">Snow ★★☆☆☆</div></div>
      </div>
    </div>
    <div class="actions">
      <button class="ghost prev">← Back</button>
      <button class="primary next" disabled>Next → Utilities</button>
    </div>
  </section>

  <section class="stage" id="stage-4" data-stage="4" hidden>
    <h2>Step 4 — Utilities (Systems)</h2>
    <p class="lead">Slot in power, water, and connectivity. Choose one per row.</p>

    <div style="margin:10px 0 6px;font-weight:700">Power</div>
    <div class="grid">
      <div class="card" data-group="power" data-value="Grid Tie"> <div class="title">Grid Tie</div><div class="muted">Standard service.</div></div>
      <div class="card" data-group="power" data-value="Solar + Battery"> <div class="title">Solar + Battery</div><div class="muted">Resilience + savings.</div></div>
      <div class="card" data-group="power" data-value="Hybrid (Generator)"> <div class="title">Hybrid (Generator)</div><div class="muted">Backup for outages.</div></div>
    </div>

    <div style="margin:14px 0 6px;font-weight:700">Water</div>
    <div class="grid">
      <div class="card" data-group="water" data-value="Traditional"> <div class="title">Traditional</div><div class="muted">City or well.</div></div>
      <div class="card" data-group="water" data-value="Greywater + Low-Flow"> <div class="title">Greywater + Low-Flow</div><div class="muted">Reuse sinks/showers.</div></div>
      <div class="card" data-group="water" data-value="Cistern + Filtration"> <div class="title">Cistern + Filtration</div><div class="muted">Rain capture/off-grid.</div></div>
    </div>

    <div style="margin:14px 0 6px;font-weight:700">Connectivity</div>
    <div class="grid">
      <div class="card" data-group="net" data-value="Fiber"> <div class="title">Fiber</div><div class="muted">Best latency.</div></div>
      <div class="card" data-group="net" data-value="Starlink"> <div class="title">Starlink</div><div class="muted">Rural capable.</div></div>
      <div class="card" data-group="net" data-value="Mesh Node"> <div class="title">Mesh Node</div><div class="muted">Community network.</div></div>
    </div>

    <div class="actions">
      <button class="ghost prev">← Back</button>
      <button class="primary next" disabled>Next → Interior</button>
    </div>
  </section>

  <section class="stage" id="stage-5" data-stage="5" hidden>
    <h2>Step 5 — Interior (Layout)</h2>
    <p class="lead">Pick how spaces flow. You can extend this later with room modules.</p>
    <div class="grid">
      <div class="card" data-group="interior" data-value="Open Studio + Island Kitchen">
        <div class="title">Open Studio + Island Kitchen</div>
        <div class="stats"><div class="stat">Entertaining ★★★★☆</div><div class="stat">Focus ★★★☆☆</div></div>
      </div>
      <div class="card" data-group="interior" data-value="Modular Pods (Bed/Bath/Kitchen)">
        <div class="title">Modular Pods (Bed/Bath/Kitchen)</div>
        <div class="stats"><div class="stat">Flex ★★★★★</div><div class="stat">Cost ★★☆☆☆</div></div>
      </div>
      <div class="card" data-group="interior" data-value="Studio + Workshop Garage">
        <div class="title">Studio + Workshop Garage</div>
        <div class="stats"><div class="stat">Maker ★★★★★</div><div class="stat">Quiet ★★☆☆☆</div></div>
      </div>
    </div>

    <div class="actions">
      <button class="ghost prev">← Back</button>
      <button class="primary" id="finish">Finish → Summary</button>
    </div>
  </section>

  <!-- SUMMARY -->
  <section class="stage" id="summary" hidden>
    <h2>Build Summary</h2>
    <p class="lead">Here’s your configuration. You can export this JSON to wire into a cost model later.</p>
    <div class="summary" id="summaryGrid"></div>
    <div style="margin-top:14px;display:flex;gap:8px;flex-wrap:wrap">
      <span class="badge">⚠️ Next step: site survey & soils report</span>
      <span class="badge">📐 Add roof pitch & insulation (R-values)</span>
      <span class="badge">🧰 Add permitting checklist</span>
      <span class="badge danger">No costs shown (per your request)</span>
    </div>
    <div class="actions">
      <button class="ghost" id="restart">Start Over</button>
      <button class="primary" id="download">Download JSON</button>
    </div>
  </section>

  <footer>© HouseDex • concept mock for Micro Homes & BTC Studios</footer>
</div>

<script>
  const selections = {}; // user choices by group
  const stages = [...document.querySelectorAll('.stage')];
  const dots   = [...document.querySelectorAll('.dot')];

  // handle selecting cards
  document.body.addEventListener('click', (e)=>{
    const card = e.target.closest('.card');
    if(!card) return;
    const group = card.dataset.group;
    const value = card.dataset.value;

    // unselect other cards in group
    [...document.querySelectorAll(`.card[data-group="${group}"]`)]
      .forEach(c=>c.classList.remove('selected'));
    card.classList.add('selected');

    selections[group] = value;

    // enable "next" in this stage
    const stage = e.target.closest('.stage');
    const nextBtn = stage.querySelector('.next');
    if(nextBtn){ nextBtn.disabled = false; }
  });

  // navigation
  function showStage(n){
    stages.forEach(s=>{
      s.hidden = s.dataset.stage != n;
    });
    // progress dots
    dots.forEach((d,i)=> d.classList.toggle('active', i < n));
    // summary and restart visibility
    document.getElementById('summary').hidden = n !== 'summary';
  }

  // Next buttons
  document.querySelectorAll('.next').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const current = btn.closest('.stage');
      const n = Number(current.dataset.stage) + 1;
      // guard: require a selection in this stage
      const groupsNeeded = {
        1:['foundation'],
        2:['structure'],
        3:['exterior'],
        4:['power','water','net']
      };
      const need = groupsNeeded[current.dataset.stage] || [];
      const ok = need.every(g => selections[g]);
      if(!ok){ btn.disabled = true; return; }
      // move to next stage
      showStage(String(n));
      // disable next on arrival until a choice is made
      const nextStage = document.querySelector(`.stage[data-stage="${n}"] .next`);
      if(nextStage){ nextStage.disabled = true; }
    });
  });

  // Prev buttons
  document.querySelectorAll('.prev').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const current = btn.closest('.stage');
      const n = Math.max(1, Number(current.dataset.stage) - 1);
      showStage(String(n));
    });
  });

  // Finish → Summary
  document.getElementById('finish').addEventListener('click', ()=>{
    // require interior selection
    if(!selections['interior']) return;
    const grid = document.getElementById('summaryGrid');
    grid.innerHTML = '';
    const pretty = {
      Foundation: selections['foundation'],
      Structure: selections['structure'],
      Exterior: selections['exterior'],
      Power: selections['power'],
      Water: selections['water'],
      Connectivity: selections['net'],
      Interior: selections['interior']
    };
    Object.entries(pretty).forEach(([k,v])=>{
      const el = document.createElement('div');
      el.className = 'sum-box';
      el.innerHTML = `<div class="muted">${k}</div><div class="title" style="margin-top:6px">${v||'-'}</div>`;
      grid.appendChild(el);
    });
    // store json
    window.houseDexResult = pretty;
    // show summary screen
    showStage('summary');
  });

  // Download JSON
  document.getElementById('download').addEventListener('click', ()=>{
    const data = JSON.stringify(window.houseDexResult || {}, null, 2);
    const blob = new Blob([data], {type:'application/json'});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = 'housedex-selection.json';
    a.click();
    URL.revokeObjectURL(a.href);
  });

  // Restart
  document.getElementById('restart').addEventListener('click', ()=>{
    // reset selections & UI
    for (const k in selections) delete selections[k];
    document.querySelectorAll('.card').forEach(c=>c.classList.remove('selected'));
    document.querySelectorAll('.next').forEach(n=>n.disabled = true);
    showStage('1');
  });

  // initial stage
  showStage('1');
</script>
</body>
</html>

